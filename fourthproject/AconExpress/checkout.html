<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Checkout - RideConnect</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Header with logo and nav -->
  <header>
    <div class="container header-flex">
      <a href="index.html" class="logo-circle">
        <img src="file:///C:/Users/pauli/Desktop/acon.html/images/acon.logo.jpeg" alt="RideConnect Logo" class="logo" />
      </a>
      <nav>
        <a href="index.html">Home</a>
        <a href="#">How It Works</a>
        <a href="#">Contact</a>
        <a href="checkout.html">Checkout</a>
      </nav>
    </div>
  </header>

  <!-- Banner section -->
  <section class="banner">
    <div class="container">
      <h1>Complete Your Ride Booking</h1>
      <p>You're one step away from securing your ride.</p>
    </div>
</section>
  <!-- Checkout Form -->
  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Checkout</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- passenger informatioin-->
     <main class="Customer's information">
        <form class="PassengerInfo">
            <h1> Passenger Information</h1>
            <label for="firstName">First Name:</label>
            <input type="text" id="firstName" name="firstName" placeholder="Enter your first name" required />

            <label for="lastName">Last Name:</label>
            <input type="text" id="lastName" name="lastName" placeholder="Enter your last name" required />

            <label for="phone">Phone Number:</label>
            <input type="tel" id="phone" name="phone" placeholder="(123) 456-7890" required />

            <label for="email">Email Address:</label>
            <input type="email" id="email" name="email" placeholder="you@example.com" required />

     </form>
    </main>
    <!-- Passenger pick up information-->
    <main class="Pickup Information"> 
        <form class="PassengerInfo">  
            <h1>Pickup Address</h1>
        <label for="pickupAddress">Street Address:</label>
        <input type="text" id="pickupAddress" name="pickupAddress" placeholder="123 Main St" required />
        
            <!-- City Selection -->
            <label for="pickupCity">Select Your City:</label>
            <select id="pickupCity" name="pickupCity" required>
            <option value="">Select City</option>
            <option value="cincinnati">Cincinnati</option>
            <option value="columbus">Columbus</option>
            <option value="philadelphia">Philadelphia</option>
            <option value="illinois">Chicago</option>
            <option value="newyork">New York</option>
            <option value="newjersey">Newark</option>
            </select>

            <!-- State Selection -->
            <label for="pickupState">Select Your State:</label>
            <select id="pickupState" name="pickupState" required>
            <option value="">Select State</option>
            <option value="OH">Ohio</option>
            <option value="PA">Pennsylvania</option>
            <option value="IL">Illinois</option>
            <option value="NY">New York</option>
            <option value="NJ">New Jersey</option>
            </select>

        <label for="pickupZip">ZIP Code:</label>
        <input type="text" id="pickupZip" name="pickupZip" placeholder="45211" required />
        <!--
        <label for="phone">Phone Number:</label>
        <input type="tel" id="phone" name="phone" placeholder="(123) 456-7890" required />
        -->
     </form>
   
    
    <!-- Booking Details Section -->
    <main>

    <section class="booking-section">
    <h2>Booking Details</h2>
  
    <label for="destination">Destination:</label>
    <select id="destination" required>
      <option value="">Select Destination</option>
      <option value="columbus">Columbus</option>
      <option value="philadelphia">Philadelphia</option>
      <option value="newyork">New York City</option>
      <option value="newjersey">New Jersey</option>
      <option value="chicago">Chicago (IL)</option>
    </select>
  
    <label for="carType">Ride Type:</label>
    <select id="carType" required>
      <option value="">Select Ride Type</option>
      <option value="shared">Shared Ride</option>
      <option value="sedan">Solo Sedan</option>
      <option value="suv">Solo SUV</option>
    </select>
  
    <p class="price-display">Estimated Price: $<span id="totalPrice">0.00</span></p>
  </section> 
  <!--
        <div id="priceDisplay" class="price-box">
          Estimated Price: <strong id="priceAmount">$0.00</strong>
          <p id="priceWarning" style="color: red; font-size: 0.9rem;"></p>
        </div>
  -->
    </main>
   <!-- Payment section -->

    <form class="PaymentInfo">
      <!-- Billing Information Section -->
<section class="PassengerInfo">
    <h1>Billing Information</h1>
    <form id="billingForm">
      <label for="billingAddress">Address:</label>
      <input type="text" id="billingAddress" name="billingAddress" placeholder="123 Main St" required>
  
      <label for="billingApt">Apartment (optional):</label>
      <input type="text" id="billingApt" name="billingApt" placeholder="Apt #">
  
      <label for="billingCity">City:</label>
      <input type="text" id="billingCity" name="billingCity" placeholder="Enter city" required>
  
      <label for="billingState">State:</label>
      <input type="text" id="billingState" name="billingState" placeholder="State will auto-fill" readonly required>
  
      <label for="billingZip">Zip Code:</label>
      <input type="text" id="billingZip" name="billingZip" placeholder="Zip Code" required>
  
      <label for="cardNumber">Card Number:</label>
      <input type="text" id="cardNumber" name="cardNumber" placeholder="1234 5678 9012 3456" required>
  
      <label for="expDate">Expiration Date:</label>
      <input type="text" id="expDate" name="expDate" placeholder="MM/YY" required>
  
      <label for="cvv">CVV:</label>
      <input type="text" id="cvv" name="cvv" placeholder="123" required>
  
      <p>Or pay with:</p>
      <label><input type="radio" name="paymentMethod" value="zelle"> Zelle</label>
      <label><input type="radio" name="paymentMethod" value="cashapp"> Cash App</label>
  
      <br><br>
      <button type="submit">Confirm and Pay</button>
    </form>
  </section>
  </main>
  
<!-- scripts-->
  
<script>
    async function validateCity() {
      const cityInput = document.getElementById("billingCity").value.trim();
      const stateInput = document.getElementById("billingState");
      const cityError = document.getElementById("cityError");
  
      if (!cityInput) {
        stateInput.value = "";
        cityError.style.display = "none";
        return;
      }
  
      try {
        const response = await fetch(`https://wft-geo-db.p.rapidapi.com/v1/geo/cities?namePrefix=${encodeURIComponent(cityInput)}&countryIds=US&limit=1`, {
          method: 'GET',
          headers: {
            'X-RapidAPI-Key': 'd5c31ff372msh7f4d4f6e9ae25bfp1124f8jsnb2d3333dde6e',
            'X-RapidAPI-Host': 'wft-geo-db.p.rapidapi.com'
          }
        });
  
        const data = await response.json();
  
        if (data.data && data.data.length > 0) {
          const city = data.data[0];
          stateInput.value = city.regionCode || '';
          cityError.style.display = "none";
        } else {
          stateInput.value = "";
          cityError.style.display = "block";
        }
      } catch (error) {
        console.error("Error validating city:", error);
        stateInput.value = "";
        cityError.style.display = "block";
      }
    }
  </script>
  

    <script>
      const prices = {
        "cincinnati-newyork": { shared: 120, sedan: 260, suv: 350 },
        "cincinnati-philadelphia": { shared: 100, sedan: 220, suv: 300 },
        "columbus-newyork": { shared: 110, sedan: 250, suv: 330 }
      };
  
      const pickupEl = document.getElementById("pickup");
      const destinationEl = document.getElementById("destination");
      const rideTypeEl = document.getElementById("rideType");
      const travelDateEl = document.getElementById("travelDate");
      const priceEl = document.getElementById("priceAmount");
      const warningEl = document.getElementById("priceWarning");
  
      function getParams() {
        const urlParams = new URLSearchParams(window.location.search);
        return {
          pickup: urlParams.get("pickup"),
          destination: urlParams.get("destination"),
          travelDate: urlParams.get("travelDate"),
          rideType: urlParams.get("rideType")
        };
      }
  
      function fillForm({ pickup, destination, travelDate, rideType }) {
        if (pickup) pickupEl.value = pickup;
        if (destination) destinationEl.value = destination;
        if (travelDate) travelDateEl.value = travelDate;
        if (rideType) rideTypeEl.value = rideType;
  
        updatePrice();
      }
  
      function updatePrice() {
        const key = `${pickupEl.value}-${destinationEl.value}`;
        const ride = rideTypeEl.value;
        const route = prices[key];
  
        if (route && route[ride]) {
          priceEl.textContent = `$${route[ride]}`;
          warningEl.textContent = "";
        } else {
          priceEl.textContent = "$0.00";
          if (pickupEl.value && destinationEl.value && ride) {
            warningEl.textContent = "This route or ride type is not yet supported.";
          } else {
            warningEl.textContent = "";
          }
        }
      }
  
      // Event listeners
      pickupEl.addEventListener("change", updatePrice);
      destinationEl.addEventListener("change", updatePrice);
      rideTypeEl.addEventListener("change", updatePrice);
  
      // Init
      const userInput = getParams();
      fillForm(userInput);
    </script>
    <!-- read and fill the pickup city state-->
     <script>
  // Auto-fill City & State from URL
  window.addEventListener("DOMContentLoaded", () => {
    const urlParams = new URLSearchParams(window.location.search);
    const pickup = urlParams.get("pickup");

    if (pickup) {
      const cityMap = {
        cincinnati: "Cincinnati, OH",
        columbus: "Columbus, OH",
        philadelphia: "Philadelphia, PA",
        illinois: "Illinois",
        newyork: "New York, NY",
        newjersey: "New Jersey"
      };

      const displayValue = cityMap[pickup.toLowerCase()] || pickup;
      document.getElementById("pickupCityState").value = displayValue;
    }
  });
</script>
<script>
    const pricing = {
      columbus: { shared: 58, sedan: 185, suv: 285 },
      philadelphia: { shared: 173, sedan: 415, suv: 515 },
      newyork: { shared: 190, sedan: 450, suv: 550 },
      newjersey: { shared: 180, sedan: 430, suv: 530 },
      chicago: { shared: 105, sedan: 280, suv: 380 }
    };
  
    document.getElementById('destination').addEventListener('change', updatePrice);
    document.getElementById('carType').addEventListener('change', updatePrice);
  
    function updatePrice() {
      const destination = document.getElementById('destination').value;
      const carType = document.getElementById('carType').value;
      const totalSpan = document.getElementById('totalPrice');
  
      if (destination && carType && pricing[destination]) {
        let price = pricing[destination][carType];
        totalSpan.textContent = price.toFixed(2);
      } else {
        totalSpan.textContent = '0.00';
      }
    }
  </script>
  
  </body>
  </html>
  
